<!DOCTYPE HTML>
<HTML>
<HEAD>
    <meta charset="utf-8">
    <title>File Upload on Node.js</title>
    <script src="js/jquery.min.js"></script>
</HEAD>

<BODY>
    <h1>File Upload on Node.js using AWS EC2 and ElastiCache</h1>
    <h2>Directions:</h2>
    <p>1. Upload a JSON file.</p>

    <form action="/" method="post" enctype="multipart/form-data">
        <input type="file" name="file[]" multiple="" />
        <input id="uploadID" type="submit" value="Upload">
    </form>

    <script type="text/javascript">
        $("#uploadID").click(function() {
            var fd = new FormData();
            var file_data = $('input[type="file"]')[0].files; // for multiple files
            for (var i = 0; i < file_data.length; i++) {
                fd.append("filename", file_data[i]);
            }
            var other_data = $('form').serializeArray();
            $.each(other_data, function(key, input) {
                fd.append(input.name, input.value);
            });
            $.ajax({
                url: '/',
                data: fd,
                type: 'POST',
                success: function(data) {
                    console.log(data);
                }
            });
        });
    </script>
</BODY>
</HTML>